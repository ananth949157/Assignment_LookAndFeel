<html>
<head>
  <style>
    /* Add your CSS styles here */
  </style>
</head>
<body>
  <header>
    <!-- Add your header code here -->
  </header>
  <main>
    <section id="station-info">
      <!-- Add your station information code here -->
    </section>
    <section id="nearby-stations">
      <!-- Add your map or list code here -->
    </section>
  </main>
  <script>
    var info = document.getElementById("station-info");
    var nearby = document.getElementById("nearby-stations");
    var apiKey = "hkZVQijE8ZvMpchuICzQYDI8gIyPjxVsGzt9h0oI"; // Replace with your API key
    var apiUrl = "https://cors-anywhere.herokuapp.com/https://developer.nrel.gov/api/alt-fuel-stations/v1/"; // Base URL for the API
    var stationId = window.location.search.split("=")[1]; // Get the station id from the URL query string
  
    if (stationId) {
      // Station id exists
      // Build the API request URL for getting the station details
      var detailUrl = apiUrl + parseInt(stationId) + ".json?api_key=" + apiKey;
      // Send the API request using XMLHttpRequest
      var xhr1 = new XMLHttpRequest();
      xhr1.open("GET", detailUrl);
      xhr1.onload = function() {
        if (xhr1.status == 200) {
          // Request successful
          var response = JSON.parse(xhr1.responseText); // Parse the response data as JSON
          var station = response.alt_fuel_station; // Get the station object 
  
          function generateHTML(station) {
            // Initialize an empty string to store the HTML code
            var html = "";
            // Loop over the station object
            for (var key in station) {
              // Check if the station object has the key as its own property
              if (station.hasOwnProperty(key)) {
                // Get the value of the key
                var value = station[key];
                // Check if the value is an array
                if (Array.isArray(value)) {
                  // Join the array elements with commas
                  value = value.join(", ");
                }
                // Add the key and value pair to the HTML code as a paragraph element
                html += "<p>" + key + ": " + value + "</p>";
              }
            }
            // Return the HTML code
            return html;
          }
          // Add the station information to the section element 
          info.innerHTML = generateHTML(station);
        } else {
          // Request failed 
          info.innerHTML = "<p>Sorry, something went wrong. Please try again later.</p>";
        }
      };
      xhr1.send();
    } else {
      // Station id does not exist
      info.innerHTML = "<p>No station id provided. Please go back to the search page and select a station.</p>";
    }
  </script>
</body>
</html>
